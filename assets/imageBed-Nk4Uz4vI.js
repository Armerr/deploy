import{i as ne,r as w,h as _,g as re,f as M,j as oe,k as H,l as ae,m as ie,p as g,_ as le,q as S,o as ce,c as se,a as m,s as ue,t as v,v as fe,U as pe,x as de,y as me,d as ge}from"./index-Cjm0Cgno.js";var ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},ve=Symbol("iconContext"),q=function(){return ne(ve,{prefixCls:w("anticon"),rootClassName:w(""),csp:w()})};function A(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function be(e,n){return e&&e.contains?e.contains(n):!1}var N="data-vc-order",he="vc-icon-key",j=new Map;function W(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.mark;return n?n.startsWith("data-")?n:"data-".concat(n):he}function P(e){if(e.attachTo)return e.attachTo;var n=document.querySelector("head");return n||document.body}function Ce(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function V(e){return Array.from((j.get(e)||e).children).filter(function(n){return n.tagName==="STYLE"})}function F(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!A())return null;var t=n.csp,o=n.prepend,r=document.createElement("style");r.setAttribute(N,Ce(o)),t&&t.nonce&&(r.nonce=t.nonce),r.innerHTML=e;var a=P(n),c=a.firstChild;if(o){if(o==="queue"){var s=V(a).filter(function(l){return["prepend","prependQueue"].includes(l.getAttribute(N))});if(s.length)return a.insertBefore(r,s[s.length-1].nextSibling),r}a.insertBefore(r,c)}else a.appendChild(r);return r}function we(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=P(n);return V(t).find(function(o){return o.getAttribute(W(n))===e})}function _e(e,n){var t=j.get(e);if(!t||!be(document,t)){var o=F("",n),r=o.parentNode;j.set(e,r),e.removeChild(o)}}function Oe(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=P(t);_e(o,t);var r=we(n,t);if(r)return t.csp&&t.csp.nonce&&r.nonce!==t.csp.nonce&&(r.nonce=t.csp.nonce),r.innerHTML!==e&&(r.innerHTML=e),r;var a=F(e,t);return a.setAttribute(W(t),n),a}function R(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.forEach(function(r){Te(e,r,t[r])})}return e}function Te(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function U(e){return typeof e=="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(typeof e.icon=="object"||typeof e.icon=="function")}function I(e,n,t){return t?_(e.tag,R({key:n},t,e.attrs),(e.children||[]).map(function(o,r){return I(o,"".concat(n,"-").concat(e.tag,"-").concat(r))})):_(e.tag,R({key:n},e.attrs),(e.children||[]).map(function(o,r){return I(o,"".concat(n,"-").concat(e.tag,"-").concat(r))}))}function Q(e){return re(e)[0]}function Y(e){return e?Array.isArray(e)?e:[e]:[]}var xe=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;function G(e){return e&&e.getRootNode&&e.getRootNode()}function Se(e){return A()?G(e)instanceof ShadowRoot:!1}function je(e){return Se(e)?G(e):null}var Ie=function(){var n=q(),t=n.prefixCls,o=n.csp,r=oe(),a=xe;t&&(a=a.replace(/anticon/g,t.value)),M(function(){if(A()){var c=r.vnode.el,s=je(c);Oe(a,"@ant-design-vue-icons",{prepend:!0,csp:o.value,attachTo:s})}})},Ae=["icon","primaryColor","secondaryColor"];function Pe(e,n){if(e==null)return{};var t=ke(e,n),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}function ke(e,n){if(e==null)return{};var t={},o=Object.keys(e),r,a;for(a=0;a<o.length;a++)r=o[a],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}function T(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.forEach(function(r){$e(e,r,t[r])})}return e}function $e(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var O=H({primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1});function Ee(e){var n=e.primaryColor,t=e.secondaryColor;O.primaryColor=n,O.secondaryColor=t||Q(n),O.calculated=!!t}function Ne(){return T({},O)}var y=function(n,t){var o=T({},n,t.attrs),r=o.icon,a=o.primaryColor,c=o.secondaryColor,s=Pe(o,Ae),l=O;if(a&&(l={primaryColor:a,secondaryColor:c||Q(a)}),U(r),!U(r))return null;var i=r;return i&&typeof i.icon=="function"&&(i=T({},i,{icon:i.icon(l.primaryColor,l.secondaryColor)})),I(i.icon,"svg-".concat(i.name),T({},s,{"data-icon":i.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"}))};y.props={icon:Object,primaryColor:String,secondaryColor:String,focusable:String};y.inheritAttrs=!1;y.displayName="IconBase";y.getTwoToneColors=Ne;y.setTwoToneColors=Ee;function Re(e,n){return ze(e)||Be(e,n)||Le(e,n)||Ue()}function Ue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(e,n){if(e){if(typeof e=="string")return L(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L(e,n)}}function L(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function Be(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var o=[],r=!0,a=!1,c,s;try{for(t=t.call(e);!(r=(c=t.next()).done)&&(o.push(c.value),!(n&&o.length===n));r=!0);}catch(l){a=!0,s=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw s}}return o}}function ze(e){if(Array.isArray(e))return e}function J(e){var n=Y(e),t=Re(n,2),o=t[0],r=t[1];return y.setTwoToneColors({primaryColor:o,secondaryColor:r})}function De(){var e=y.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Me=ae({name:"InsertStyles",setup:function(){return Ie(),function(){return null}}}),He=["class","icon","spin","rotate","tabindex","twoToneColor","onClick"];function qe(e,n){return Qe(e)||Fe(e,n)||Ve(e,n)||We()}function We(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ve(e,n){if(e){if(typeof e=="string")return B(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(e,n)}}function B(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}function Fe(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var o=[],r=!0,a=!1,c,s;try{for(t=t.call(e);!(r=(c=t.next()).done)&&(o.push(c.value),!(n&&o.length===n));r=!0);}catch(l){a=!0,s=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(a)throw s}}return o}}function Qe(e){if(Array.isArray(e))return e}function z(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.forEach(function(r){C(e,r,t[r])})}return e}function C(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ye(e,n){if(e==null)return{};var t=Ge(e,n),o,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],!(n.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(t[o]=e[o])}return t}function Ge(e,n){if(e==null)return{};var t={},o=Object.keys(e),r,a;for(a=0;a<o.length;a++)r=o[a],!(n.indexOf(r)>=0)&&(t[r]=e[r]);return t}J(ie.primary);var h=function(n,t){var o,r=z({},n,t.attrs),a=r.class,c=r.icon,s=r.spin,l=r.rotate,i=r.tabindex,u=r.twoToneColor,p=r.onClick,b=Ye(r,He),d=q(),f=d.prefixCls,$=d.rootClassName,X=(o={},C(o,$.value,!!$.value),C(o,f.value,!0),C(o,"".concat(f.value,"-").concat(c.name),!!c.name),C(o,"".concat(f.value,"-spin"),!!s||c.name==="loading"),o),x=i;x===void 0&&p&&(x=-1);var Z=l?{msTransform:"rotate(".concat(l,"deg)"),transform:"rotate(".concat(l,"deg)")}:void 0,K=Y(u),E=qe(K,2),ee=E[0],te=E[1];return g("span",z({role:"img","aria-label":c.name},b,{onClick:p,class:[X,a],tabindex:x}),[g(y,{icon:c,primaryColor:ee,secondaryColor:te,style:Z},null),g(Me,null,null)])};h.props={spin:Boolean,rotate:Number,icon:Object,twoToneColor:[String,Array]};h.displayName="AntdIcon";h.inheritAttrs=!1;h.getTwoToneColor=De;h.setTwoToneColor=J;function D(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},o=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.forEach(function(r){Je(e,r,t[r])})}return e}function Je(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var k=function(n,t){var o=D({},n,t.attrs);return g(h,D({},o,{icon:ye}),null)};k.displayName="CloudUploadOutlined";k.inheritAttrs=!1;const Xe={class:"main-container"},Ze={class:"upload-wrapper"},Ke={class:"ant-upload-drag-icon"},et={class:"tool-wrapper"},tt={class:"autoCopy"},nt={class:"compress"},rt={__name:"imageBed",setup(e){const n=w([]),t=w([]),o=H({autoCopy:!0,compress:1}),r=l=>{const i=l.file.status;i==="done"?(navigator.clipboard.writeText(l.file.response).then(()=>{v.success("图片链接已复制")}).catch(u=>{v.error("复制失败: "+u.message)}),v.success(`${l.file.name} 上传成功`)):i==="error"&&v.error(`${l.file.name} 上传失败`)},a=l=>{const{file:i,onSuccess:u,onError:p}=l,b=new FormData;b.append("file",i);const d={userId:fe.get(pe),fileUid:i.uid};de(d,b).then(f=>{t.value.push({uid:f.fileUid,thumbUrl:f.url,url:f.url,name:f.fileName}),u(f.url),s()}).catch(f=>{p(f)})},c=({file:l})=>{const i=()=>{const u=t.value.find(p=>p.uid===l.uid);u&&u.url?navigator.clipboard.writeText(u.url).then(()=>{v.success("图片链接已复制")}).catch(p=>{v.error("复制失败: "+p.message)}):v.error("图片链接无效")};return _("div",{style:{position:"relative",display:"inline-block",width:"80px",height:"80px",border:"1px solid #d9d9d9",borderRadius:"4px",overflow:"hidden",textAlign:"center",cursor:"pointer",fontSize:"12px",lineHeight:"18px"},onClick:()=>i()},[_("img",{src:l.thumbUrl||l.url,alt:l.name,style:{width:"100%",height:"100%",objectFit:"cover"}}),_("span",{style:{position:"absolute",bottom:"0",left:"0",right:"0",padding:"0 5px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",fontSize:"10px"}},l.name)])},s=()=>{M(()=>{const l=document.querySelector(".ant-upload-list-picture-card");l&&l.scrollTo({left:0,behavior:"smooth"})})};return(l,i)=>{const u=S("a-upload-dragger"),p=S("a-switch"),b=S("a-input-number");return ce(),se("div",Xe,[m("div",Ze,[g(u,{fileList:n.value,"onUpdate:fileList":i[0]||(i[0]=d=>n.value=d),name:"file",multiple:!0,"list-type":"picture-card","custom-request":a,onChange:r,"item-render":c,class:"custom-upload-dragger"},{default:ue(()=>[m("p",Ke,[g(me(k))]),i[3]||(i[3]=m("p",{class:"ant-upload-text"},[ge(" 拖拽文件到这里或者 "),m("span",{style:{color:"#3478f5"}},"点击上传")],-1)),i[4]||(i[4]=m("p",{class:"ant-upload-hint"},"支持多选或者单选，点击上传完成的图片后可复制到剪切板",-1))]),_:1},8,["fileList"])]),m("div",et,[m("span",tt,[g(p,{checked:o.autoCopy,"onUpdate:checked":i[1]||(i[1]=d=>o.autoCopy=d),"inline-prompt":"","checked-children":"自动复制","un-checked-children":"自动复制"},null,8,["checked"])]),m("span",nt,[i[5]||(i[5]=m("span",null,"压缩质量：",-1)),g(b,{max:1,min:0,step:.1,style:{width:"80px"},value:o.compress,"onUpdate:value":i[2]||(i[2]=d=>o.compress=d),placeholder:"0.0"},null,8,["value"])])])])}}},at=le(rt,[["__scopeId","data-v-5117b6eb"]]);export{at as default};
